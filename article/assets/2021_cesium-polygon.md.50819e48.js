import{o as n,c as s,a}from"./app.653a9468.js";const p='{"title":"Cesium面相关整理","description":"","frontmatter":{},"headers":[{"level":2,"title":"Entity 实体","slug":"entity-实体"},{"level":3,"title":"PolygonGraphics 多边形","slug":"polygongraphics-多边形"},{"level":2,"title":"Primitive 图元","slug":"primitive-图元"}],"relativePath":"2021/cesium-polygon.md","lastUpdated":1638174346375}',t={},o=a('<h1 id="cesium面相关整理"><a class="header-anchor" href="#cesium面相关整理" aria-hidden="true">#</a> Cesium面相关整理</h1><p><strong>贴地面几何体暂不支持轮廓线</strong></p><h2 id="entity-实体"><a class="header-anchor" href="#entity-实体" aria-hidden="true">#</a> Entity 实体</h2><h3 id="polygongraphics-多边形"><a class="header-anchor" href="#polygongraphics-多边形" aria-hidden="true">#</a> PolygonGraphics 多边形</h3><p><strong>多边形无相对地形的高度</strong></p><div class="language-javascript"><pre><code><span class="token keyword">let</span> polygonJson <span class="token operator">=</span> <span class="token punctuation">{</span>\n  type<span class="token operator">:</span> <span class="token string">&#39;Feature&#39;</span><span class="token punctuation">,</span>\n  properties<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n  geometry<span class="token operator">:</span> <span class="token punctuation">{</span>\n    type<span class="token operator">:</span> <span class="token string">&#39;Polygon&#39;</span><span class="token punctuation">,</span>\n    coordinates<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">[</span>\n        <span class="token punctuation">[</span><span class="token number">107.8857421875</span><span class="token punctuation">,</span> <span class="token number">34.14363482031264</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">107.457275390625</span><span class="token punctuation">,</span> <span class="token number">32.676372772089834</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">107.57812499999999</span><span class="token punctuation">,</span> <span class="token number">31.043521630684204</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">110.478515625</span><span class="token punctuation">,</span> <span class="token number">30.552800413453546</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">111.895751953125</span><span class="token punctuation">,</span> <span class="token number">33.27543541298162</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">107.8857421875</span><span class="token punctuation">,</span> <span class="token number">34.14363482031264</span><span class="token punctuation">]</span>\n      <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">[</span>\n        <span class="token punctuation">[</span><span class="token number">108.96240234375</span><span class="token punctuation">,</span> <span class="token number">33.41310221370827</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">108.533935546875</span><span class="token punctuation">,</span> <span class="token number">32.35212281198644</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">109.654541015625</span><span class="token punctuation">,</span> <span class="token number">31.80289258670676</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">110.269775390625</span><span class="token punctuation">,</span> <span class="token number">32.7503226078097</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">108.96240234375</span><span class="token punctuation">,</span> <span class="token number">33.41310221370827</span><span class="token punctuation">]</span>\n      <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">[</span>\n        <span class="token punctuation">[</span><span class="token number">109.12170410156249</span><span class="token punctuation">,</span> <span class="token number">32.43097672054704</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">109.6490478515625</span><span class="token punctuation">,</span> <span class="token number">32.43097672054704</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">109.6490478515625</span><span class="token punctuation">,</span> <span class="token number">32.80112754111693</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">109.12170410156249</span><span class="token punctuation">,</span> <span class="token number">32.80112754111693</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">[</span><span class="token number">109.12170410156249</span><span class="token punctuation">,</span> <span class="token number">32.43097672054704</span><span class="token punctuation">]</span>\n      <span class="token punctuation">]</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nwindow<span class="token punctuation">.</span>entity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Entity</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  polygon<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolygonGraphics</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    hierarchy<span class="token operator">:</span> <span class="token function">buildPolygonHierarchy</span><span class="token punctuation">(</span>polygonJson<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>coordinates<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token keyword">function</span> <span class="token function">buildPolygonHierarchy</span><span class="token punctuation">(</span><span class="token parameter">coords<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  index <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolygonHierarchy</span><span class="token punctuation">(</span>\n    Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegreesArrayHeights</span><span class="token punctuation">(</span>\n      coords<span class="token punctuation">[</span>index<span class="token punctuation">]</span>\n        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> i<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">?</span> i<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> i\n        <span class="token punctuation">}</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">)</span><span class="token punctuation">,</span>\n    index <span class="token operator">===</span> coords<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>\n      <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n      <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">buildPolygonHierarchy</span><span class="token punctuation">(</span>coords<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\nviewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>\n\n</code></pre></div><hr><h2 id="primitive-图元"><a class="header-anchor" href="#primitive-图元" aria-hidden="true">#</a> Primitive 图元</h2><div class="language-javascript"><pre><code>window<span class="token punctuation">.</span>primitive <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Primitive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  geometryInstances<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>GeometryInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    geometry<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolygonGeometry</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      polygonHierarchy<span class="token operator">:</span> <span class="token function">buildPolygonHierarchy</span><span class="token punctuation">(</span>polygonJson<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>coordinates<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    attributes<span class="token operator">:</span> <span class="token punctuation">{</span>\n      color<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ColorGeometryInstanceAttribute</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  appearance<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PerInstanceColorAppearance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token comment">// appearance: new Cesium.EllipsoidSurfaceAppearance({</span>\n  <span class="token comment">//   material: Cesium.Material.fromType(&#39;Color&#39;, {</span>\n  <span class="token comment">//     color: Cesium.Color.fromCssColorString(&#39;rgba(255,255,0,0.5)&#39;)</span>\n  <span class="token comment">//   })</span>\n  <span class="token comment">// })</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nscene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>primitive<span class="token punctuation">)</span>\n\n<span class="token comment">// 贴地</span>\n\nwindow<span class="token punctuation">.</span>primitive <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>GroundPrimitive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  geometryInstances<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>GeometryInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    geometry<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolygonGeometry</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      polygonHierarchy<span class="token operator">:</span> <span class="token function">buildPolygonHierarchy</span><span class="token punctuation">(</span>polygonJson<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>coordinates<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      height<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>\n      extrudedHeight<span class="token operator">:</span> <span class="token number">6000</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    attributes<span class="token operator">:</span> <span class="token punctuation">{</span>\n      color<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ColorGeometryInstanceAttribute</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  appearance<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PerInstanceColorAppearance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token comment">// appearance: new Cesium.EllipsoidSurfaceAppearance({</span>\n  <span class="token comment">//   material: Cesium.Material.fromType(&#39;Color&#39;, {</span>\n  <span class="token comment">//     color: Cesium.Color.fromCssColorString(&#39;rgba(255,255,0,0.5)&#39;)</span>\n  <span class="token comment">//   })</span>\n  <span class="token comment">// })</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nscene<span class="token punctuation">.</span>groundPrimitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>primitive<span class="token punctuation">)</span>\n</code></pre></div>',9);t.render=function(a,p,t,e,c,u){return n(),s("div",null,[o])};export default t;export{p as __pageData};
